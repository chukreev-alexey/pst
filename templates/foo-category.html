<!DOCTYPE html>
<html>
<head>
    <title>{{ category }}</title>
</head>
<body>
    <h1>{{ category }}</h1>

    {% if filter_enabled %}
        <h2>Фильтр</h2>
        <form method="get" accept-charset="utf-8">
            {% if filter_data_category %}
                <h3>Категории</h3>
                {% for pk, categ in filter_data_category.items %}
                    <div>
                        <label>
                            {% if not categ.available %}<s>{% endif %}
                            {{ categ.name }} ({{ categ.products|length }})
                            {% if not categ.available %}</s>{% endif %}
                            <input type="checkbox" name="{{ filter_key_category }}" value="{{ pk }}"
                                   {% if not categ.available %}disabled{% endif %}
                                   {% if categ.selected %}checked{% endif %}>
                        </label>
                    </div>
                {% endfor %}
            {% endif %}

            {% if filter_data_brand %}
                <h3>Бренды</h3>
                {% for pk, brand in filter_data_brand.items %}
                    <div>
                        <label>
                            {% if not brand.available %}<s>{% endif %}
                            {{ brand.name }} ({{ brand.products|length }})
                            {% if not brand.available %}</s>{% endif %}
                            <input type="checkbox" name="{{ filter_key_brand }}" value="{{ pk }}"
                                   {% if not brand.available %}disabled{% endif %}
                                   {% if brand.selected %}checked{% endif %}>
                        </label>
                    </div>
                {% endfor %}
            {% endif %}

            {% if filter_data_param %}
                <h3>Параметры</h3>
                {% for group in filter_data_param.values %}
                    <fieldset>
                        <legend>{{ group.name }}</legend>
                        {% for pk, item in group.values.items %}
                            <div>
                                <label>
                                    {% if not item.available %}<s>{% endif %}
                                    {{ item.name }} ({{ item.products|length }})
                                    {% if not item.available %}</s>{% endif %}
                                    <input type="checkbox" name="{{ filter_key_param }}" value="{{ pk }}"
                                           {% if not item.available %}disabled{% endif %}
                                           {% if item.selected %}checked{% endif %}>
                                </label>
                            </div>
                        {% endfor %}
                    </fieldset>
                {% endfor %}
            {% endif %}

            <input type="submit" value="Применить">
            <a href="{{ filter_reset_url }}">Сбросить</a>
        </form>
    {% endif %}

    <hr>

    <h2>Товары ({{ page_obj.paginator.count }})</h2>
    <ul>
        {% for product in page_obj %}
            <li><a href="{{ product.get_absolute_url }}">{{ product }} ({{ product.pk }})</a></li>
        {% endfor %}
    </ul>

    {% include 'itcase_paginator/include/paginator.html' %}
</body>
</html>

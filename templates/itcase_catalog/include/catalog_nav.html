{% load itcase_common %}

<div class="catalog-nav {{ additional_class }}">
    <div class="catalog-nav__wrapper clearfix">
        <div class="catalog-nav__title {{ title_additional_class }}">Каталог</div>
        <div class="catalog-nav__search">
            {% include 'itcase_search/include/quick/quick_search_button.html' %}
            {% include 'itcase_pages/include/menu.html' %}
        </div>
        {% include 'itcase_search/include/quick/quick_search_popup.html' %}
    </div>

    <div class="catalog-menu">
        <div class="catalog-menu__wrapper clearfix">
            {% for chunk in catalog_menu|chunks_list %}
                <div class="catalog-menu__column">
                    {% for category in chunk %}
                        <div class="catalog-menu__item {% if category in catalog_breadcrumbs %}catalog-menu__item_state_current{% endif %}">
                            <a href="{{ category.get_absolute_url }}" class="catalog-menu__item-link"><span>{{ category.name }}</span></a>

                            {% if category in catalog_breadcrumbs %}
                                <div class="catalog-menu__submenu">

                                    {% for sub_chunk in category.children.all|chunks_list %}
                                        <div class="catalog-menu__submenu-column">
                                            {% for sub_category in sub_chunk %}
                                                <a href="{{ sub_category.get_absolute_url }}" class="catalog-menu__submenu-item {% if sub_category in catalog_breadcrumbs %}catalog-menu__submenu-item_state_current{% endif %}">{{ sub_category.name }}</a>
                                            {% endfor %}
                                        </div>
                                    {% endfor %}
                                </div>
                            {% endif %}

                        </div>
                    {% endfor %}
                </div>
            {% endfor %}
        </div>
    </div>
</div>
